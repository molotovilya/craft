

> Суть математики заключается в построении сложного из простого. Композиционность — это формализация этого принципа.
> — <cite>John Baez, Lectures on n-Categories and Cohomology</cite>


### Комбинирование 

Что такое композиция? Это способ построить преобразование с помощью других преобразований. 

В данном случае мы можем взять пару преобразований связанных на промежуточном объекте (важно что он промежуточный) и превратить их в преобразование минующее этот промежуточный объект

$$
A \xrightarrow{f} B \xrightarrow{g} C \quad \Rightarrow \quad A \xrightarrow{g \circ f} C
$$

Это полученное преобразование уже нечто новое, не стоит считать, что это "два" соединённых преобразования.

$$g \circ f = h$$

Когда мы говорим о категории и всех преобразованиях между всеми объектами - то мы требуем, чтобы для любой пары последовательных морфизмов существовала композиция. Но что это означает?  

### Исключение промежутков

Получается, что в категории мы ВСЕГДА можем исключить промежуточное состояние/структуру из рассмотрения. Построить преобразование которое стирает промежуточный объект и превращает его в пустоту. 

$$
A \xrightarrow{f} B \xrightarrow{g} C \quad \Rightarrow \quad A \overset{g \circ f}{\ \rightarrow \ \ \ \  \rightarrow \ } С \quad \Rightarrow \quad A \xrightarrow{h} C
$$

Это находит своё отражение в функциональном программировании, где вся логика построения систем уходит от переменных хранящих промежуточные состояния. Остаются только процессы - один вход, один выход. И возможность комбинировать функции друг с другом. А переменны - чёрт с ними. Они бездомные , никому не нужные дети структуры, которых используют в функциональных преобразованиях. Мы имеем только функции с входом и выходом. Всё остальное - вычиление.

### Возможно ли расщепление? 

НО это я сказал про возможность движения в одну сторону - т.е. в сторону соединения стрелок в композицию. Но у нас же равенство в композиции, а значит бывает обратный переход - от морфизма к его разложению (расщеплению) в композицию: 

$$
A \xrightarrow{h  \ =  \ g \circ f} C
\quad \Rightarrow \quad 
A \xrightarrow{f} B \xrightarrow{g} C
$$

Конечно, такое возможно не всегда. Не каждый морфизм представляется через какую-то композицию. Есть у нас "простейшие" морфизмы. Неразложимые. С ними вы такого проделать не сможете. Но в целом это интересная мысль - а как морфизмы ведут себя в композициях, что можно разложить, а что нельзя. Какую роль будет играть предварительная композиция, а какую композиция "после" преобразования. Это породит ряд последующих обсуждений про: 
- ретракцию 
- сечение 
- мономорфизм
- эпиморфизм
- ...  

но пока не будем лезть в детали. Мы ещё не поняли, что такое композиция. Ведь композиция имеет топологическую аналоги. Вернее сказать гомотопическую 
### Композиция как гомотопия 

Представим, что у нас есть треугольник с теми же объектами и морфизмами. 

![[композиционный треугольник.jpg]]

Такая штука называется "**коммутативной диаграммой**". Её коммутативность - означает, что равны - комбинация двух морфизмов и конечный:

$$
g \circ f = h
$$

Топологическая аналогия тут в том, что есть в топологии такая штука как "гомотопия" - плавное перетягивание одного преобраования-пути в другое. Но ведь такую же идею можно применить здесь. 

Представим, что наш процесс композиции - это плавное перетягивание пары соединяемых стрелок в конечную стрелку $h$. Перетягивание это мы можем сделать считая, что натянута плёнка большей размерности. А равенство означает это мы можем двигаться как в сторону комбинирования, так и обратно в сторону разложения скомбинированного морфизма.  

И более того эта "плёнка" отсылает нам к тому, что между морфизмами вообще-то существуют другие морфизмы (преобразования), которые позволяют сделать такой переход. 


$$
g \circ f  \rightarrow  h  
$$

$$
g \circ f  \leftarrow  h  
$$

Это уже не простое "равенство", а попытка разобраться почему это равенство работает. НО пока мы лезть в это глубоко не будем. Это лучше вспомнить когда мы поговорим о сопряжённых функторах.

Подумаем лучше о структуре. О том, как с такой топологической аналогией можно представлять категорию в целом? 

### Структура стрелок и плёнок 

Пусть нам даны объекты и стрелки. Можно визуально представить себе весь разговор о собранной структуре, как набор простых стрелок и композиций. Таких "стягивающих треугольников".  

И даже интереснее. Мы могли бы рассматривать не только плёнки натянутые на треугольники, но и более сложные коммутативные диаграммы. Например квадрат: 

![[коммутативный квадрат.png]]

наличие которого говорило бы:     $g \circ f = k \circ h$

Что вообще-то можно представить через наличие промежуточного соединяющего ребра (но это оставлю вам на подумать). 

В целом я говорю о таком "визуальном представлении структуры". Но отсюда следует интересный вопрос - а можем ли мы упростить эту структуру, разложив все сложные процессы в композиции более простых. Упростив всё до "простых процессов" со всякими промежуточными объектами. 

Ясно что если у нас есть хотя бы один квадрат - то тут так просто не упростить. Ведь промежуточная "более сложная" композиция будет служить неустранимой связкой. Если её упростить, мы потеряем память о том, что
$$g \circ f = k \circ h$$
Но для свободных треугольников мы можем произвести сокращение. Что отсылает нас к другой мысли. Представление сложного простым. Или иначе говоря - зачем мы вообще возимся с этой композицией 

---

### Заключение. Построение сложных процессов как композиция простых 

Если мы начинаем с простых процессов - элементарных морфизмов, то легко настраивать композиции. В особенности если изначально в категории нам позволено это делать между всем и всем.  

Добавив квадраты и прочее - мы можем вводить и дополнительные условия. Как бы то, что зашито во внутреннюю геометрию связей. В представление структуры. 

Но подумайте. Ведь именно так люди строят сложные системы. Мы создаём набор простых шагов, чтобы создавать нечто более сложное. Комбинации простых процессов складываются в более комплексные. Что при производстве плюшевых мишек, что при создании ракет. 

Этот принцип как "теория" развивался последние 50 лет больше в рамках компьютерных наук. Отчасти в функциональном программировании, отчасти в теории вычислении. Да там вообще много чего хорошего развивалось, в том числе теория типов и струнные диаграммы. Но это к слову. Просто скажем спасибо практической периферии. 

Композиционность мы находим во всяческой работе программ и даже в математических доказательств. Которые в последнее время кстати становятся многостраничными томами, порой непосильными для простой проверки. Вот до чего дошла их композиционность от простого к сложному.  

В заключении хочу подметить, что композиционность обеспечивает нам динамической структурой. Позволяя связать статические объеты и простые морфизмы между ними в более широкую сеть сложных преобразований. И в последующих статьях мы поговорим о том, как нам мыслить себе разделения композиций и какие интересные свойства они при этом обретают. 